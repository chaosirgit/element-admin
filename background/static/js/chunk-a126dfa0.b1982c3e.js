(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a126dfa0"],{"09f4":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),Math.easeInOutQuad=function(t,e,n,i){return t/=i/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function o(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function a(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(t,e,n){var r=a(),c=t-r,l=20,s=0;e="undefined"===typeof e?500:e;var u=function t(){s+=l;var a=Math.easeInOutQuad(s,r,c,e);o(a),s<e?i(t):n&&"function"===typeof n&&n()};u()}},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"14c3":function(t,e,n){var i=n("c6b6"),o=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var a=n.call(t,e);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==i(t))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},"31da":function(t,e,n){},"4d28":function(t,e,n){"use strict";var i=n("31da"),o=n.n(i);o.a},"59ce":function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"g",(function(){return l})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return u}));var i=n("b775");function o(t){return Object(i["a"])({url:"ticket",method:"post",data:t})}function a(t){return Object(i["a"])({url:"ticket",method:"put",data:t})}function r(t){return Object(i["a"])({url:"ticket",method:"get",params:t})}function c(t){return Object(i["a"])({url:"ticket/all",method:"get",params:t})}function l(t){return Object(i["a"])({url:"ticket/relation",method:"put",params:t})}function s(t){return Object(i["a"])({url:"ticket",method:"delete",params:t})}function u(t){return Object(i["a"])({url:"ticket/open",method:"put",params:t})}},7156:function(t,e,n){var i=n("861d"),o=n("d2bb");t.exports=function(t,e,n){var a,r;return o&&"function"==typeof(a=e.constructor)&&a!==n&&i(r=a.prototype)&&r!==n.prototype&&o(t,r),t}},"841c":function(t,e,n){"use strict";var i=n("d784"),o=n("825a"),a=n("1d80"),r=n("129f"),c=n("14c3");i("search",1,(function(t,e,n){return[function(e){var n=a(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,n):new RegExp(e)[t](String(n))},function(t){var i=n(e,t,this);if(i.done)return i.value;var a=o(t),l=String(this),s=a.lastIndex;r(s,0)||(a.lastIndex=0);var u=c(a,l);return r(a.lastIndex,s)||(a.lastIndex=s),null===u?-1:u.index}]}))},"90db":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("search",{attrs:{"status-hidden":!0},on:{search:t.fetchData}}),n("el-row",[n("el-col",[n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handlerCreate}},[t._v(" 添加 ")])],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}])}),n("el-table-column",{attrs:{label:"水票名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name)+" ")]}}])}),n("el-table-column",{attrs:{label:"水票价格"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.price)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"创建时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-time"}),n("span",[t._v(t._s(e.row.created_at))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"关闭/开启",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{directives:[{name:"loading",rawName:"v-loading",value:t.switchLoading,expression:"switchLoading"}],attrs:{"active-value":1,"inactive-value":0},on:{change:function(n){return t.switchOpen(e.row.id)}},model:{value:e.row.is_open,callback:function(n){t.$set(e.row,"is_open",n)},expression:"scope.row.is_open"}})]}}])}),n("el-table-column",{attrs:{align:"center",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"operation-buttons"},[n("el-button",{attrs:{type:"success"},on:{click:function(n){return t.relation(e.row,e.$index)}}},[t._v(" 关联商品 ")]),n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.edit(e.row,e.$index)}}},[t._v("编辑")]),n("el-button",{attrs:{type:"danger"},on:{click:function(n){return t.del(e.row,e.$index)}}},[t._v("删除")])],1)]}}])})],1),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticClass:"text-left",attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.fetchData}}),n("el-dialog",{attrs:{title:"create"===t.dialogStatus?"添加水票":"编辑水票",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{attrs:{model:t.ticket}},[n("el-row",{staticStyle:{"margin-bottom":"20px"}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"水票名称","label-width":t.formLabelWidth}},[n("el-input",{staticStyle:{width:"195px"},attrs:{autocomplete:"off"},model:{value:t.ticket.name,callback:function(e){t.$set(t.ticket,"name",e)},expression:"ticket.name"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"水票价格","label-width":t.formLabelWidth}},[n("el-input-number",{staticStyle:{width:"195px"},attrs:{precision:2,step:.1,min:0},model:{value:t.ticket.price,callback:function(e){t.$set(t.ticket,"price",e)},expression:"ticket.price"}})],1)],1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v("确 定")])],1)],1),n("el-dialog",{staticClass:"text-center",attrs:{title:"提醒 ",visible:t.dialogHintVisible,center:"",width:"30%"},on:{"update:visible":function(e){t.dialogHintVisible=e}}},[n("span",{staticClass:"text-center"},[t._v(" 此操作会删除水票，可能会造成数据关联错误，确定删除吗？ ")]),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogHintVisible=!1}}},[t._v(" 取消 ")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.delData()}}},[t._v(" 确定 ")])],1)]),n("el-dialog",{staticClass:"text-center",attrs:{title:"关联选择",visible:t.dialogRelationVisible,center:"",width:"80%"},on:{"update:visible":function(e){t.dialogRelationVisible=e}}},[[n("div",{staticClass:"box-center"},[n("el-transfer",{attrs:{filterable:"","filter-placeholder":"请输入商品名称搜索",data:t.products,titles:["待选列表","已选择列表"],props:{key:"id",label:"name"}},on:{change:t.selectRelation},model:{value:t.ticket.product_arr,callback:function(e){t.$set(t.ticket,"product_arr",e)},expression:"ticket.product_arr"}})],1)],n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogRelationVisible=!1}}},[t._v(" 取消 ")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.postRelationData()}}},[t._v(" 确定 ")])],1)],2)],1)},o=[],a=n("59ce"),r=n("c4c8"),c=n("333d"),l=n("9d59"),s={components:{Pagination:c["a"],Search:l["a"]},filters:{statusFilter:function(t){var e={published:"success",draft:"gray",deleted:"danger"};return e[t]}},data:function(){return{switchLoading:!0,total:0,list:null,listLoading:!0,listQuery:{page:1,limit:10,search:"",status:null,startTime:"",endTime:""},products:[],dialogTableVisible:!1,dialogRelationVisible:!1,dialogFormVisible:!1,dialogHintVisible:!1,dialogStatus:"create",ticket:{id:"",name:"",price:"0.00",product_arr:[]},formLabelWidth:"120px"}},computed:{headers:function(){return{Authorization:this.$store.getters.token}}},mounted:function(){this.fetchData(),this.getProducts()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(a["c"])(this.listQuery).then((function(e){t.total=e.data.total,t.list=e.data.data,t.listLoading=!1,t.switchLoading=!1}))},fetchData:function(t){this.listQuery=Object.assign(this.listQuery,t),console.log(this.listQuery),this.getList()},handlerCreate:function(){this.ticket={},this.dialogFormVisible=!0,this.dialogStatus="create"},createData:function(){var t=this;console.log(this.ticket),Object(a["e"])(this.ticket).then((function(e){200===e.code&&(t.dialogFormVisible=!1,t.getList())}))},edit:function(t,e){console.log(t,e),this.dialogFormVisible=!0,this.dialogStatus="update",this.ticket=t},del:function(t,e){this.dialogHintVisible=!0,this.ticket=t},updateData:function(){var t=this;Object(a["f"])(this.ticket).then((function(e){200===e.code&&(t.dialogFormVisible=!1,t.getList())}))},delData:function(){var t=this;Object(a["a"])(this.ticket).then((function(e){200===e.code&&(t.dialogHintVisible=!1,t.getList())}))},selectModel:function(t){console.log(t),this.ticket.model=t},selectMeans:function(t){this.ticket.means=t},switchOpen:function(t){var e=this;this.switchLoading=!0,Object(a["d"])({id:t}).then((function(t){e.switchLoading=!1}))},getProducts:function(){var t=this;Object(r["b"])().then((function(e){200===e.code&&(t.products=e.data)}))},selectRelation:function(t){console.log(t),this.ticket.product_arr=t},postRelationData:function(){var t=this;Object(a["g"])(this.ticket).then((function(e){200===e.code&&(t.dialogRelationVisible=!1,t.getList())}))},relation:function(t){console.log(t),this.ticket=t,this.dialogRelationVisible=!0}}},u=s,d=(n("4d28"),n("2877")),f=Object(d["a"])(u,i,o,!1,null,null,null);e["default"]=f.exports},9263:function(t,e,n){"use strict";var i=n("ad6d"),o=n("9f7f"),a=RegExp.prototype.exec,r=String.prototype.replace,c=a,l=function(){var t=/a/,e=/b*/g;return a.call(t,"a"),a.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),s=o.UNSUPPORTED_Y||o.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=l||u||s;d&&(c=function(t){var e,n,o,c,d=this,f=s&&d.sticky,p=i.call(d),h=d.source,g=0,b=t;return f&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),b=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(h="(?: "+h+")",b=" "+b,g++),n=new RegExp("^(?:"+h+")",p)),u&&(n=new RegExp("^"+h+"$(?!\\s)",p)),l&&(e=d.lastIndex),o=a.call(f?n:d,b),f?o?(o.input=o.input.slice(g),o[0]=o[0].slice(g),o.index=d.lastIndex,d.lastIndex+=o[0].length):d.lastIndex=0:l&&o&&(d.lastIndex=d.global?o.index+o[0].length:e),u&&o&&o.length>1&&r.call(o[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(o[c]=void 0)})),o}),t.exports=c},"9f7f":function(t,e,n){"use strict";var i=n("d039");function o(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=i((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=i((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a9e3:function(t,e,n){"use strict";var i=n("83ab"),o=n("da84"),a=n("94ca"),r=n("6eeb"),c=n("5135"),l=n("c6b6"),s=n("7156"),u=n("c04e"),d=n("d039"),f=n("7c73"),p=n("241c").f,h=n("06cf").f,g=n("9bf2").f,b=n("58a8").trim,m="Number",v=o[m],x=v.prototype,y=l(f(x))==m,k=function(t){var e,n,i,o,a,r,c,l,s=u(t,!1);if("string"==typeof s&&s.length>2)if(s=b(s),e=s.charCodeAt(0),43===e||45===e){if(n=s.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(s.charCodeAt(1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+s}for(a=s.slice(2),r=a.length,c=0;c<r;c++)if(l=a.charCodeAt(c),l<48||l>o)return NaN;return parseInt(a,i)}return+s};if(a(m,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var w,_=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof _&&(y?d((function(){x.valueOf.call(n)})):l(n)!=m)?s(new v(k(e)),n,_):k(e)},E=i?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;E.length>I;I++)c(v,w=E[I])&&!c(_,w)&&g(_,w,h(v,w));_.prototype=x,x.constructor=_,r(o,m,_)}},ac1f:function(t,e,n){"use strict";var i=n("23e7"),o=n("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},ad6d:function(t,e,n){"use strict";var i=n("825a");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},c4c8:function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"b",(function(){return s}));var i=n("b775");function o(t){return Object(i["a"])({url:"product",method:"post",data:t})}function a(t){return Object(i["a"])({url:"product",method:"put",data:t})}function r(t){return Object(i["a"])({url:"product",method:"get",params:t})}function c(t){return Object(i["a"])({url:"product",method:"delete",params:t})}function l(t){return Object(i["a"])({url:"product/up",method:"put",params:t})}function s(t){return Object(i["a"])({url:"product/all",method:"get",params:t})}},d784:function(t,e,n){"use strict";n("ac1f");var i=n("6eeb"),o=n("d039"),a=n("b622"),r=n("9263"),c=n("9112"),l=a("species"),s=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=a("replace"),f=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),p=!o((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,d){var h=a(t),g=!o((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),b=g&&!o((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[l]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return e=!0,null},n[h](""),!e}));if(!g||!b||"replace"===t&&(!s||!u||f)||"split"===t&&!p){var m=/./[h],v=n(h,""[t],(function(t,e,n,i,o){return e.exec===r?g&&!o?{done:!0,value:m.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),x=v[0],y=v[1];i(String.prototype,t,x),i(RegExp.prototype,h,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}d&&c(RegExp.prototype[h],"sham",!0)}}}]);