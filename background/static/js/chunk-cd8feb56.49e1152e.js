(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cd8feb56"],{"09f4":function(t,e,i){"use strict";i.d(e,"a",(function(){return l})),Math.easeInOutQuad=function(t,e,i,n){return t/=n/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function a(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(t,e,i){var l=r(),o=t-l,s=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=s;var r=Math.easeInOutQuad(c,l,o,e);a(r),c<e?n(t):i&&"function"===typeof i&&i()};u()}},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"14c3":function(t,e,i){var n=i("c6b6"),a=i("9263");t.exports=function(t,e){var i=t.exec;if("function"===typeof i){var r=i.call(t,e);if("object"!==typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},"220f":function(t,e,i){"use strict";var n=i("32d2"),a=i.n(n);a.a},"32d2":function(t,e,i){},"571f":function(t,e,i){"use strict";i.d(e,"d",(function(){return a})),i.d(e,"e",(function(){return r})),i.d(e,"c",(function(){return l})),i.d(e,"b",(function(){return o})),i.d(e,"a",(function(){return s}));var n=i("b775");function a(t){return Object(n["a"])({url:"site",method:"post",data:t})}function r(t){return Object(n["a"])({url:"site",method:"put",data:t})}function l(t){return Object(n["a"])({url:"site",method:"get",params:t})}function o(t){return Object(n["a"])({url:"site/all",method:"get",params:t})}function s(t){return Object(n["a"])({url:"site",method:"delete",params:t})}},"59f8":function(t,e,i){"use strict";i.d(e,"d",(function(){return a})),i.d(e,"e",(function(){return r})),i.d(e,"c",(function(){return l})),i.d(e,"b",(function(){return o})),i.d(e,"a",(function(){return s}));var n=i("b775");function a(t){return Object(n["a"])({url:"seller",method:"post",data:t})}function r(t){return Object(n["a"])({url:"seller",method:"put",data:t})}function l(t){return Object(n["a"])({url:"seller",method:"get",params:t})}function o(t){return Object(n["a"])({url:"seller/all",method:"get",params:t})}function s(t){return Object(n["a"])({url:"seller",method:"delete",params:t})}},"69e4":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("search",{attrs:{"status-hidden":!0},on:{search:t.fetchData}}),i("el-row",[i("el-col",[i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handlerCreate}},[t._v(" 添加 ")])],1)],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}])}),i("el-table-column",{attrs:{label:"水站名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name)+" ")]}}])}),i("el-table-column",{attrs:{label:"水站地址"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.address)+" ")]}}])}),i("el-table-column",{attrs:{label:"所属商户"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.seller_name)+" ")]}}])}),i("el-table-column",{attrs:{label:"站长昵称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.op_name)+" ")]}}])}),i("el-table-column",{attrs:{align:"center",label:"创建时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("i",{staticClass:"el-icon-time"}),i("span",[t._v(t._s(e.row.created_at))])]}}])}),i("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"operation-buttons"},[i("el-button",{attrs:{type:"primary"},on:{click:function(i){return t.edit(e.row,e.$index)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"danger"},on:{click:function(i){return t.del(e.row,e.$index)}}},[t._v("删除")])],1)]}}])})],1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticClass:"text-left",attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.fetchData}}),i("el-dialog",{attrs:{title:"create"===t.dialogStatus?"添加水站":"编辑水站",visible:t.dialogFormVisible,width:"80%"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.cancel}},[i("el-form",{attrs:{model:t.site}},[i("el-row",{staticStyle:{"margin-bottom":"20px"}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"水站名称","label-width":t.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.site.name,callback:function(e){t.$set(t.site,"name",e)},expression:"site.name"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"水站地址","label-width":t.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.site.address,callback:function(e){t.$set(t.site,"address",e)},expression:"site.address"}})],1)],1)],1),i("el-row",{staticStyle:{"margin-bottom":"20px"}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"指定商户","label-width":t.formLabelWidth}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:t.selectSeller},model:{value:t.site.seller_id,callback:function(e){t.$set(t.site,"seller_id",e)},expression:"site.seller_id"}},t._l(t.sellers,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"指定站长","label-width":t.formLabelWidth}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:t.selectOp},model:{value:t.site.op_id,callback:function(e){t.$set(t.site,"op_id",e)},expression:"site.op_id"}},t._l(t.deliverers,(function(t){return i("el-option",{key:t.id,attrs:{label:t.nickname,value:t.id}})})),1)],1)],1)],1),i("el-row",{staticStyle:{"margin-bottom":"20px"}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"选择地点","label-width":t.formLabelWidth}},[i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-location"},on:{click:t.handlerSelectLocation}},[t._v(" 点击选择 ")]),t.site.longitude&&t.site.latitude?i("div",{staticClass:"text-center",staticStyle:{"margin-top":"10px"}},[t._v(" 经度： "+t._s(t.site.longitude)+" 纬度： "+t._s(t.site.latitude)+" ")]):t._e()],1)],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancel}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v("确 定")])],1)],1),i("el-dialog",{staticClass:"text-center",attrs:{title:"提醒 ",visible:t.dialogHintVisible,center:"",width:"30%"},on:{"update:visible":function(e){t.dialogHintVisible=e}}},[i("span",{staticClass:"text-center"},[t._v(" 此操作会直接删除水站，可能会产生数据关联错误，确定删除吗？ ")]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogHintVisible=!1}}},[t._v(" 取消 ")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.delData()}}},[t._v(" 确定 ")])],1)]),i("el-dialog",{staticClass:"text-center",attrs:{title:"选择位置 ",visible:t.dialogAMapVisible,center:"",width:"70%"},on:{"update:visible":function(e){t.dialogAMapVisible=e}}},[[i("div",{staticClass:"amap-page-container"},[i("el-amap-search-box",{staticClass:"search-box",attrs:{"search-option":t.searchOption,"on-search-result":t.onSearchResult}}),i("el-amap",{staticClass:"amap-demo",staticStyle:{height:"700px"},attrs:{vid:"amapDemo",center:t.mapCenter,zoom:12,events:t.events}},t._l(t.markers,(function(t){return i("el-amap-marker",{attrs:{position:t}})})),1)],1)]],2)],1)},a=[],r=(i("4de4"),i("571f")),l=i("9f0e"),o=i("59f8"),s=i("333d"),c=i("9d59"),u=i("8f9b"),d=new u["AMapManager"],f={components:{Pagination:s["a"],Search:c["a"]},data:function(){var t=this;return{searchOption:{city:"郑州",citylimit:!1},amapManager:d,zoom:12,events:{click:function(e){console.log(e),t.site.longitude=e.lnglat.lng,t.site.latitude=e.lnglat.lat,t.markers=[[t.site.longitude,t.site.latitude]]}},mapCenter:[113.601979,34.794764],markers:[],total:0,list:null,listLoading:!0,listQuery:{page:1,limit:10,search:"",status:null,startTime:"",endTime:""},options:null,sellers:null,deliverers:null,dialogTableVisible:!1,dialogFormVisible:!1,dialogHintVisible:!1,dialogVisible:!1,dialogAMapVisible:!1,dialogStatus:"create",site:{id:0,name:"",address:0,seller_id:0,seller_name:"",longitude:"",latitude:"",op_name:"",op_id:0},formLabelWidth:"120px"}},computed:{headers:function(){return{Authorization:this.$store.getters.token}}},mounted:function(){this.fetchData()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(r["c"])(this.listQuery).then((function(e){t.total=e.data.total,t.list=e.data.data,t.listLoading=!1}))},cancel:function(){this.dialogFormVisible=!1,this.getList()},fetchData:function(t){this.listQuery=Object.assign(this.listQuery,t),console.log(this.listQuery),this.getList()},fetchSellers:function(){var t=this;Object(o["b"])().then((function(e){t.sellers=e.data}))},fetchDeliverer:function(){var t=this;Object(l["a"])().then((function(e){t.deliverers=e.data}))},handlerCreate:function(){this.fetchSellers(),this.fetchDeliverer(),this.site={},this.dialogFormVisible=!0,this.dialogStatus="create",this.mapCenter=[113.601979,34.794764],this.markers=[]},createData:function(){var t=this;console.log(this.site),this.site.deliverer_id=this.site.op_id,Object(r["d"])(this.site).then((function(e){200===e.code&&(t.dialogFormVisible=!1,t.getList())}))},edit:function(t,e){console.log(t,e),this.fetchSellers(),this.fetchDeliverer(),this.dialogFormVisible=!0,this.dialogStatus="update",this.site=t,this.mapCenter=[this.site.longitude,this.site.latitude],this.markers=[[this.site.longitude,this.site.latitude]]},del:function(t,e){this.dialogHintVisible=!0,this.site=t},updateData:function(){var t=this;this.site.deliverer_id=this.site.op_id,Object(r["e"])(this.site).then((function(e){200===e.code&&(t.dialogFormVisible=!1,t.getList())}))},delData:function(){var t=this;Object(r["a"])(this.site).then((function(e){200===e.code&&(t.dialogHintVisible=!1,t.getList())}))},handleAvatarSuccess:function(t){this.$loading().close(),console.log(t),this.product.img=t.data},handleChange:function(t){this.product.category_id=t},imgArrAdd:function(t,e,i){200===t.code&&this.product.img_list.push({url:t.data}),console.log(e),console.log(this.product.img_list)},imgArrRemove:function(t,e){console.log(t),this.product.img_list=this.product.img_list.filter((function(e){return t.url!==e.url})),console.log(this.product.img_list)},selectSeller:function(t){this.site.seller_id=t},selectOp:function(t){this.site.op_id=t},handlerSelectLocation:function(){this.dialogAMapVisible=!0},onSearchResult:function(t){console.log(t),t.length>0&&(this.mapCenter=[t[0].lng,t[0].lat])}}},p=f,h=(i("220f"),i("2877")),m=Object(h["a"])(p,n,a,!1,null,null,null);e["default"]=m.exports},7156:function(t,e,i){var n=i("861d"),a=i("d2bb");t.exports=function(t,e,i){var r,l;return a&&"function"==typeof(r=e.constructor)&&r!==i&&n(l=r.prototype)&&l!==i.prototype&&a(t,l),t}},"841c":function(t,e,i){"use strict";var n=i("d784"),a=i("825a"),r=i("1d80"),l=i("129f"),o=i("14c3");n("search",1,(function(t,e,i){return[function(e){var i=r(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,i):new RegExp(e)[t](String(i))},function(t){var n=i(e,t,this);if(n.done)return n.value;var r=a(t),s=String(this),c=r.lastIndex;l(c,0)||(r.lastIndex=0);var u=o(r,s);return l(r.lastIndex,c)||(r.lastIndex=c),null===u?-1:u.index}]}))},9263:function(t,e,i){"use strict";var n=i("ad6d"),a=i("9f7f"),r=RegExp.prototype.exec,l=String.prototype.replace,o=r,s=function(){var t=/a/,e=/b*/g;return r.call(t,"a"),r.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),c=a.UNSUPPORTED_Y||a.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=s||u||c;d&&(o=function(t){var e,i,a,o,d=this,f=c&&d.sticky,p=n.call(d),h=d.source,m=0,g=t;return f&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),g=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(h="(?: "+h+")",g=" "+g,m++),i=new RegExp("^(?:"+h+")",p)),u&&(i=new RegExp("^"+h+"$(?!\\s)",p)),s&&(e=d.lastIndex),a=r.call(f?i:d,g),f?a?(a.input=a.input.slice(m),a[0]=a[0].slice(m),a.index=d.lastIndex,d.lastIndex+=a[0].length):d.lastIndex=0:s&&a&&(d.lastIndex=d.global?a.index+a[0].length:e),u&&a&&a.length>1&&l.call(a[0],i,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(a[o]=void 0)})),a}),t.exports=o},"9f0e":function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"b",(function(){return r})),i.d(e,"a",(function(){return l}));var n=i("b775");function a(t){return Object(n["a"])({url:"deliverer/move",method:"put",data:t})}function r(t){return Object(n["a"])({url:"deliverer",method:"get",params:t})}function l(t){return Object(n["a"])({url:"deliverer/all",method:"get",params:t})}},"9f7f":function(t,e,i){"use strict";var n=i("d039");function a(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=n((function(){var t=a("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=n((function(){var t=a("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a9e3:function(t,e,i){"use strict";var n=i("83ab"),a=i("da84"),r=i("94ca"),l=i("6eeb"),o=i("5135"),s=i("c6b6"),c=i("7156"),u=i("c04e"),d=i("d039"),f=i("7c73"),p=i("241c").f,h=i("06cf").f,m=i("9bf2").f,g=i("58a8").trim,b="Number",v=a[b],_=v.prototype,x=s(f(_))==b,y=function(t){var e,i,n,a,r,l,o,s,c=u(t,!1);if("string"==typeof c&&c.length>2)if(c=g(c),e=c.charCodeAt(0),43===e||45===e){if(i=c.charCodeAt(2),88===i||120===i)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+c}for(r=c.slice(2),l=r.length,o=0;o<l;o++)if(s=r.charCodeAt(o),s<48||s>a)return NaN;return parseInt(r,n)}return+c};if(r(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var w,E=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof E&&(x?d((function(){_.valueOf.call(i)})):s(i)!=b)?c(new v(y(e)),i,E):y(e)},S=n?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;S.length>I;I++)o(v,w=S[I])&&!o(E,w)&&m(E,w,h(v,w));E.prototype=_,_.constructor=E,l(a,b,E)}},ac1f:function(t,e,i){"use strict";var n=i("23e7"),a=i("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(t,e,i){"use strict";var n=i("825a");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},d784:function(t,e,i){"use strict";i("ac1f");var n=i("6eeb"),a=i("d039"),r=i("b622"),l=i("9263"),o=i("9112"),s=r("species"),c=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=r("replace"),f=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),p=!a((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));t.exports=function(t,e,i,d){var h=r(t),m=!a((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),g=m&&!a((function(){var e=!1,i=/a/;return"split"===t&&(i={},i.constructor={},i.constructor[s]=function(){return i},i.flags="",i[h]=/./[h]),i.exec=function(){return e=!0,null},i[h](""),!e}));if(!m||!g||"replace"===t&&(!c||!u||f)||"split"===t&&!p){var b=/./[h],v=i(h,""[t],(function(t,e,i,n,a){return e.exec===l?m&&!a?{done:!0,value:b.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),_=v[0],x=v[1];n(String.prototype,t,_),n(RegExp.prototype,h,2==e?function(t,e){return x.call(t,this,e)}:function(t){return x.call(t,this)})}d&&o(RegExp.prototype[h],"sham",!0)}}}]);