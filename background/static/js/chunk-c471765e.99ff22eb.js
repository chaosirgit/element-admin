(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c471765e"],{"09f4":function(t,e,i){"use strict";i.d(e,"a",(function(){return l})),Math.easeInOutQuad=function(t,e,i,n){return t/=n/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function o(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function a(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(t,e,i){var l=a(),r=t-l,s=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=s;var a=Math.easeInOutQuad(c,l,r,e);o(a),c<e?n(t):i&&"function"===typeof i&&i()};u()}},"502a":function(t,e,i){"use strict";var n=i("b8cb"),o=i.n(n);o.a},"59f8":function(t,e,i){"use strict";i.d(e,"d",(function(){return o})),i.d(e,"e",(function(){return a})),i.d(e,"c",(function(){return l})),i.d(e,"b",(function(){return r})),i.d(e,"a",(function(){return s}));var n=i("b775");function o(t){return Object(n["a"])({url:"seller",method:"post",data:t})}function a(t){return Object(n["a"])({url:"seller",method:"put",data:t})}function l(t){return Object(n["a"])({url:"seller",method:"get",params:t})}function r(t){return Object(n["a"])({url:"seller/all",method:"get",params:t})}function s(t){return Object(n["a"])({url:"seller",method:"delete",params:t})}},ada3:function(t,e,i){"use strict";var n=i("d1e6"),o=i.n(n);o.a},b8cb:function(t,e,i){},c405:function(t,e,i){"use strict";i.d(e,"c",(function(){return o})),i.d(e,"d",(function(){return a})),i.d(e,"b",(function(){return l})),i.d(e,"a",(function(){return r}));var n=i("b775");function o(t){return Object(n["a"])({url:"categories",method:"post",data:t})}function a(t){return Object(n["a"])({url:"categories",method:"put",data:t})}function l(t){return Object(n["a"])({url:"categories",method:"get",params:t})}function r(t){return Object(n["a"])({url:"categories",method:"delete",params:t})}},c4c8:function(t,e,i){"use strict";i.d(e,"d",(function(){return o})),i.d(e,"e",(function(){return a})),i.d(e,"c",(function(){return l})),i.d(e,"a",(function(){return r})),i.d(e,"f",(function(){return s})),i.d(e,"b",(function(){return c}));var n=i("b775");function o(t){return Object(n["a"])({url:"product",method:"post",data:t})}function a(t){return Object(n["a"])({url:"product",method:"put",data:t})}function l(t){return Object(n["a"])({url:"product",method:"get",params:t})}function r(t){return Object(n["a"])({url:"product",method:"delete",params:t})}function s(t){return Object(n["a"])({url:"product/up",method:"put",params:t})}function c(t){return Object(n["a"])({url:"product/all",method:"get",params:t})}},d1e6:function(t,e,i){},e58b:function(t,e,i){"use strict";var n=i("eb93"),o=i.n(n);o.a},e6e2:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("search",{attrs:{"status-hidden":!0},on:{search:t.fetchData}}),i("el-row",[i("el-col",[i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handlerCreate}},[t._v(" 添加 ")])],1)],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{type:"expand",label:"+"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"封面/组图"}},[i("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.img,"preview-src-list":e.row.img_arr}})],1),i("el-form-item",{attrs:{label:"商品名称"}},[i("span",[t._v(t._s(e.row.name))])]),i("el-form-item",{attrs:{label:"所属商户"}},[i("span",[t._v(t._s(e.row.seller_name))])]),i("el-form-item",{attrs:{label:"商品 ID"}},[i("span",[t._v(t._s(e.row.id))])]),i("el-form-item",{attrs:{label:"商户 ID"}},[i("span",[t._v(t._s(e.row.seller_id))])]),i("el-form-item",{attrs:{label:"商品分类"}},[i("span",[t._v(t._s(e.row.category_name))])]),i("el-form-item",{attrs:{label:"商品描述"}},[i("span",{domProps:{innerHTML:t._s(e.row.content)}})])],1)]}}])}),i("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}])}),i("el-table-column",{attrs:{label:"商品名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name)+" ")]}}])}),i("el-table-column",{attrs:{label:"商品分类"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.category_name)+" ")]}}])}),i("el-table-column",{attrs:{label:"价格"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.price)+" ")]}}])}),i("el-table-column",{attrs:{label:"押金"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.deposit)+" ")]}}])}),i("el-table-column",{attrs:{align:"center",label:"排序权重",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.sort)+" ")]}}])}),i("el-table-column",{attrs:{align:"center",label:"下架/上架",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{directives:[{name:"loading",rawName:"v-loading",value:t.switchLoading,expression:"switchLoading"}],attrs:{"active-value":1,"inactive-value":0},on:{change:function(i){return t.switchUp(e.row.id)}},model:{value:e.row.is_up,callback:function(i){t.$set(e.row,"is_up",i)},expression:"scope.row.is_up"}})]}}])}),i("el-table-column",{attrs:{align:"center",label:"创建时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("i",{staticClass:"el-icon-time"}),i("span",[t._v(t._s(e.row.created_at))])]}}])}),i("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"operation-buttons"},[i("el-button",{attrs:{type:"primary"},on:{click:function(i){return t.edit(e.row,e.$index)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"danger"},on:{click:function(i){return t.del(e.row,e.$index)}}},[t._v("删除")])],1)]}}])})],1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticClass:"text-left",attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.fetchData}}),i("el-dialog",{attrs:{title:"create"===t.dialogStatus?"添加商品":"编辑商品",visible:t.dialogFormVisible,width:"80%"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.cancel}},[i("el-form",{attrs:{model:t.product}},[i("el-row",{staticStyle:{"margin-bottom":"20px"}},[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"box-center"},[i("el-upload",{ref:"upload",staticClass:"avatar-uploader tex-center",attrs:{action:"http://waterhero.test/admin/v1/upload",name:"file","show-file-list":!1,"on-success":t.handleAvatarSuccess,headers:t.headers}},[t.product.img?i("img",{staticClass:"avatar",attrs:{src:t.product.img}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),i("div",{staticClass:"text-center",staticStyle:{"margin-top":"10px"}},[t._v(" 上传商品封面图(像素:651 x 651) ")])],1)])],1),i("el-row",{staticStyle:{"margin-bottom":"20px"}},[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"box-center"},[i("el-upload",{attrs:{action:"http://waterhero.test/admin/v1/upload","list-type":"picture-card","on-success":t.imgArrAdd,"on-remove":t.imgArrRemove,"file-list":t.product.img_list,headers:t.headers,multiple:!0}},[i("i",{staticClass:"el-icon-plus"})]),i("div",{staticClass:"text-center",staticStyle:{"margin-top":"10px"}},[t._v(" 上传商品图组(像素:651 x 651)"),i("br")])],1)])],1),i("el-row",{staticStyle:{"margin-bottom":"20px"}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"商品名称","label-width":t.formLabelWidth}},[i("el-input",{staticStyle:{width:"195px"},attrs:{autocomplete:"off"},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"选择商品分类","label-width":t.formLabelWidth}},[i("el-cascader",{attrs:{options:t.options,props:{expandTrigger:"hover",value:"id",label:"name",checkStrictly:!0,emitPath:!1},size:"medium"},on:{change:t.handleChange},model:{value:t.product.category_id,callback:function(e){t.$set(t.product,"category_id",e)},expression:"product.category_id"}})],1)],1)],1),i("el-row",{staticStyle:{"margin-bottom":"20px"}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"指定商户","label-width":t.formLabelWidth}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:t.selectSeller},model:{value:t.product.seller_id,callback:function(e){t.$set(t.product,"seller_id",e)},expression:"product.seller_id"}},t._l(t.sellers,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"商品价格","label-width":t.formLabelWidth}},[i("el-input-number",{staticStyle:{width:"195px"},attrs:{precision:2,step:.1,min:0},model:{value:t.product.price,callback:function(e){t.$set(t.product,"price",e)},expression:"product.price"}})],1)],1)],1),i("el-row",{staticStyle:{"margin-bottom":"20px"}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"桶押金","label-width":t.formLabelWidth}},[i("el-input-number",{staticStyle:{width:"195px"},attrs:{precision:2,step:.1,min:0},model:{value:t.product.deposit,callback:function(e){t.$set(t.product,"deposit",e)},expression:"product.deposit"}})],1)],1)],1),i("el-row",{staticStyle:{"margin-bottom":"20px"}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"商品内容","label-width":t.formLabelWidth}},[i("tinymce",{model:{value:t.product.content,callback:function(e){t.$set(t.product,"content",e)},expression:"product.content"}})],1)],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancel}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v("确 定")])],1)],1),i("el-dialog",{staticClass:"text-center",attrs:{title:"提醒 ",visible:t.dialogHintVisible,center:"",width:"30%"},on:{"update:visible":function(e){t.dialogHintVisible=e}}},[i("span",{staticClass:"text-center"},[t._v(" 此操作会直接删除商品，可能会产生数据关联错误，确定删除吗？ ")]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogHintVisible=!1}}},[t._v(" 取消 ")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.delData()}}},[t._v(" 确定 ")])],1)])],1)},o=[],a=(i("4de4"),i("d81d"),i("c4c8")),l=i("c405"),r=i("59f8"),s=i("333d"),c=i("9d59"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[i("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),i("div",{staticClass:"editor-custom-btn-container"},[i("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:t.imageSuccessCBK}})],1)])},d=[],m=(i("4160"),i("a9e3"),i("b680"),i("159b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" upload ")]),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-success":t.handleSuccess,action:"http://waterhero.test/admin/v1/upload","list-type":"picture-card",headers:t.headers}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v(" Click upload ")])],1),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(" Cancel ")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" Confirm ")])],1)],1)}),p=[],h=(i("b64b"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[],key:0}},computed:{headers:function(){return{Authorization:this.$store.getters.token}}},mounted:function(){this.listObj={},this.fileList=[],this.key=0},methods:{handleSubmit:function(){var t=this;console.log(this.listObj);var e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));console.log(e),this.$emit("successCBK",e),this.listObj=[],this.fileList=[],this.key=0,this.dialogVisible=!1},handleSuccess:function(t,e,i){console.log(i),200===t.code&&(this.listObj[this.key++]={url:t.data})},handleRemove:function(t){for(var e=t.uid,i=Object.keys(this.listObj),n=0,o=i.length;n<o;n++)if(this.listObj[i[n]].uid===e)return void delete this.listObj[i[n]]},beforeUpload:function(t){var e=this,i=window.URL||window.webkitURL,n=t.uid;return this.listObj[n]={},new Promise((function(o,a){var l=new Image;l.src=i.createObjectURL(t),l.onload=function(){e.listObj[n]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},o(!0)}))}}}),f=h,b=(i("e58b"),i("2877")),g=Object(b["a"])(f,m,p,!1,null,"3928fb70",null),v=g.exports,y=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],w=y,_=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],k=_,C=i("b85c"),S=[];function x(){return window.tinymce}var j=function(t,e){var i=document.getElementById(t),n=e||function(){};if(!i){var o=document.createElement("script");o.src=t,o.id=t,document.body.appendChild(o),S.push(n);var a="onload"in o?l:r;a(o)}function l(e){e.onload=function(){this.onerror=this.onload=null;var t,i=Object(C["a"])(S);try{for(i.s();!(t=i.n()).done;){var n=t.value;n(null,e)}}catch(o){i.e(o)}finally{i.f()}S=null},e.onerror=function(){this.onerror=this.onload=null,n(new Error("Failed to load "+t),e)}}function r(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,i=Object(C["a"])(S);try{for(i.s();!(e=i.n()).done;){var n=e.value;n(null,t)}}catch(o){i.e(o)}finally{i.f()}S=null}}}i&&n&&(x()?n(null,i):S.push(n))},O=j,L="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",T={name:"Tinymce",components:{editorImage:v},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{language:function(){return this.languageTypeList.zh},containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;O(L,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:k,menubar:this.menubar,plugins:w,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",i.getContent())}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))},convert_urls:!1})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach((function(t){return window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))}))}}},V=T,$=(i("502a"),Object(b["a"])(V,u,d,!1,null,"2c5224f4",null)),I=$.exports,F={components:{Tinymce:I,Pagination:s["a"],Search:c["a"]},data:function(){return{switchLoading:!0,total:0,list:null,listLoading:!0,listQuery:{page:1,limit:10,search:"",status:null,startTime:"",endTime:""},options:null,sellers:null,dialogTableVisible:!1,dialogFormVisible:!1,dialogHintVisible:!1,dialogVisible:!1,dialogStatus:"create",product:{id:0,name:"",category_id:0,seller_id:null,img:"",img_arr:[],img_list:[],price:"0.00",content:"",category_name:"",seller_name:"",is_up:0},formLabelWidth:"120px"}},computed:{headers:function(){return{Authorization:this.$store.getters.token}}},mounted:function(){this.fetchData()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(a["c"])(this.listQuery).then((function(e){t.total=e.data.total,t.list=e.data.data.map((function(t){return t.img_list=t.img_arr.map((function(t){return{url:t}})),t})),t.listLoading=!1,t.switchLoading=!1}))},switchUp:function(t){var e=this;this.switchLoading=!0,Object(a["f"])({id:t}).then((function(t){e.switchLoading=!1}))},cancel:function(){this.dialogFormVisible=!1,this.getList()},fetchData:function(t){this.listQuery=Object.assign(this.listQuery,t),console.log(this.listQuery),this.getList()},fetchCategories:function(){var t=this;Object(l["b"])().then((function(e){t.options=e.data}))},fetchSellers:function(){var t=this;Object(r["b"])().then((function(e){t.sellers=e.data}))},handlerCreate:function(){this.fetchCategories(),this.fetchSellers(),this.product={img:""},this.dialogFormVisible=!0,this.dialogStatus="create"},createData:function(){var t=this;this.product.img_arr=this.product.img_list.map((function(t){return t.url})),console.log(this.product),Object(a["d"])(this.product).then((function(e){200===e.code&&(t.dialogFormVisible=!1,t.getList())}))},edit:function(t,e){console.log(t,e),this.fetchCategories(),this.fetchSellers(),this.dialogFormVisible=!0,this.dialogStatus="update",this.product=t},del:function(t,e){this.dialogHintVisible=!0,this.product=t},updateData:function(){var t=this;this.product.img_arr=this.product.img_list.map((function(t){return t.url})),console.log(this.product),Object(a["e"])(this.product).then((function(e){200===e.code&&(t.dialogFormVisible=!1,t.getList())}))},delData:function(){var t=this;Object(a["a"])(this.product).then((function(e){200===e.code&&(t.dialogHintVisible=!1,t.getList())}))},handleAvatarSuccess:function(t){this.$loading().close(),console.log(t),this.product.img=t.data},handleChange:function(t){this.product.category_id=t},imgArrAdd:function(t,e,i){200===t.code&&this.product.img_list.push({url:t.data}),console.log(e),console.log(this.product.img_list)},imgArrRemove:function(t,e){console.log(t),this.product.img_list=this.product.img_list.filter((function(e){return t.url!==e.url})),console.log(this.product.img_list)},selectSeller:function(t){this.product.seller_id=t}}},A=F,D=(i("ada3"),Object(b["a"])(A,n,o,!1,null,null,null));e["default"]=D.exports},eb93:function(t,e,i){}}]);